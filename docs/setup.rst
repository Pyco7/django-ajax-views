
*****
Setup
*****

Installation
============

This package is available on `PyPI <https://pypi.python.org/pypi/django-ajax-views/>`_.

.. code-block:: bash

    $ pip install django-ajax-views

Dependencies
------------

..
    Install required dependencies from ``requirements.txt``.

    .. code-block:: bash

        $ pip install -r /path/to/django-ajax-views/requirements.txt

`Django`_ >= 1.9
    MVC Web Framework
`django-require`_
    Used to simplify setup of RequireJS
`django-jsonify`_
    Provides templatetag to stringify JSON config in base HTML
`django-js-reverse`_
    Djangos URL reverse in javascript
`django-crispy-forms`_
    Integrating bootstrap into Django forms
`django-guardian`_ (optional)
    Object level permission checking
`django-extra-views`_ (optional)
    Formsets for class-based views
`django-autocomplete-light`_ == 2.3.3 (optional)
    Support for autocompletion


Django settings
===============

Add ``ajaxviews`` and dependencies to your ``INSTALLED_APPS``:

.. code-block:: python

    INSTALLED_APPS = [
        # required
        'ajaxviews',
        'require',
        'jsonify',
        'django_js_reverse',
        'crispy_forms',
        # optional
        'guardian',
        'autocomplete_light',
    ]

django-ajax-views
-----------------

- ``DEFAULT_PAGINATE_BY``

    Default: ``30``

    If you use pagination for your *list views* you can override the default value.

- ``FILTER_SEARCH_INPUT_BY``

    Default: ``10``

    Number of results by which a search input field should be displayed for filter views.

- ``MESSAGE_TAGS``

    Default: ``{messages.ERROR: 'danger'}``

    Django error message tags default is 'error'. Change to ``danger`` for
    compatibility with bootstrap error tag.

django-require
--------------

- ``REQUIRE_BASE_URL``

        Default: ``'js'``

        The baseUrl to pass to the r.js optimizer, relative to STATIC_ROOT

- ``REQUIRE_JS``

        Default: ``'require.js'``

        The name of the require.js script used by your project, relative to REQUIRE_BASE_URL.

- ``REQUIRE_BUILD_PROFILE``

        Default: ``None``

        The name of a build profile to use for your project, relative to REQUIRE_BASE_URL.
        Leave blank to use the built-in default build profile if you do not want to build standalone modules.

- ``REQUIRE_STANDALONE_MODULES``

        Default: ``{}``

        A dictionary of standalone modules to build with almond.js used for production.

django-js-reverse
-----------------

- ``JS_REVERSE_OUTPUT_PATH``

    Default: ``'<STATIC_ROOT>'``

    Output path of the ``reverse.js`` file which is generated by Django management
    command ``collectstatic_js_reverse``.

django-crispy-forms
-------------------

- ``CRISPY_TEMPLATE_PACK``

    Default: ``'bootstrap3'``

    Boostrap 3 is the required template pack to use with django-ajax-views.

Configure RequireJS
===================

.. code-block:: javascript
   :caption: main.js
   :name: requirejs main file
   :linenos:

    (function () {

      require.config({
        paths: {
          'cs': '/path/to/require-cs/cs',
          'coffee-script': '/path/to/coffeescript/extras/coffee-script',
          ajaxviews: '/path/to/require-ajax-views/dist/ajaxviews',
          domReady: '/path/to/domReady/domReady',
          jquery: '/path/to/jquery/dist/jquery',
          bootstrap: '/path/to/bootstrap/dist/js/bootstrap.min',
          urlreverse: '/path/to/django_js_reverse/reverse'
        }
      });

      require(['domReady!', 'ajaxviews'], function (ajaxviews) {
        var App = ajaxviews.App;

        App.config({
          middleware: 'middleware'
        });

        App.init();
      });

    })();


.. _Django: https://github.com/django/django

.. _django-require: https://github.com/etianen/django-require

.. _django-jsonify: https://github.com/romgar/django-jsonify

.. _django-js-reverse: https://github.com/ierror/django-js-reverse

.. _django-crispy-forms: https://github.com/django-crispy-forms/django-crispy-forms

.. _django-guardian: https://github.com/django-guardian/django-guardian

.. _django-extra-views: https://github.com/AndrewIngram/django-extra-views

.. _django-autocomplete-light: https://github.com/yourlabs/django-autocomplete-light
